<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <script defer src="{{ url_for('static', filename='script.js') }}"></script>
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Dashboard</title>
  </head>

  <body>
    <div id="top">
      <h1 id="welcome">{{ username }}</h1>
      {# <a href="#">Assignments</a>
      <a href="#">Grades</a> #}
      <div id="notifications">
        <button
          onclick="toggleDivClass('notification-list')"
          id="notification-button"
          class="bell"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-bell-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"
            />
          </svg>
        </button>
        <div id="notification-list" class="hidden">
          <noscript>Please Enable Javascript</noscript>
        </div>
      </div>
    </div>
    <div id="main">
      <div id="calendar">
          <h2 style="text-align: center;">Upcoming</h2>
          <div id="assignment-list">
            {% for date in next_week.keys() %}
              <p class="important">{{ date }}</p>
              {% for a in next_week[date] %}
                {% if a == tommorow %}
                  <p class="assignment updated-name">{{ a }}</p>
                {% else %}
                  <p class="assignment">{{ a }}</p>
                {% endif %}
              {% endfor %}
              <hr />
            {% endfor %}
          </div>
        
        </div>
        <div id="grades">
          <h2>Grades</h2>
          {% for course in courses %}
            <div class="lesson">
              <div class="lesson-name-bar">
                <p class="lesson-name">
                  <span class="important">{{ course['@Title'] }}</span>
                  <span class="teacher">{{ course['@Staff'] }}</span>
                </p>
              </div>
              <div class="grade-bar">
                <p class="lesson-name">
                  Grade:
                  <span class="important grade"
                    >
                    {{ course['Marks']['Mark'][0]['@CalculatedScoreString'] }}
                    </span
                  >
                  max possible score {{ prediction[course["@Title"]]["max"] }}% 
                  <br>
                  min possible score {{ prediction[course["@Title"]]["min"] }}%
                </p>
              </div>
            </div>
          {% endfor %}
      </div>
      <div id="daily-schedule">
        <h2>Schedule</h2>
        {% for lesson in schedule %}
          {% if lesson == current_lesson %}
            <p class="schedule-lesson current-lesson">
              <span class="schedule-lesson-name important">
                {{ lesson["@ClassName"] }}
                {{ lesson["@CourseTitle"] }}</span                
                </span
              >
              <span class="meeting-day">
                {#{{ lesson["@MeetingDays"] }}#} {{ lesson["@StartTime"] }}-{{ lesson["@EndTime"] }}
              </span>
            </p>
          {% else %}
              <p class="schedule-lesson">
              <span class="schedule-lesson-name important">
                {% if today_holiday %}
                  {{ lesson["@CourseTitle"] }}</span>
                  <span class="meeting-day">
                    Meeting Days: {{ lesson["@MeetingDays"] }}                    
                  </span>
                {% else %}
                  {{ lesson["@ClassName"] }}</span>
                  <span class="meeting-day">
                    {{ lesson["@StartTime"] }}-{{ lesson["@EndTime"] }}
                  </span>
                {% endif %}
                
              <span class="meeting-day">
              </span>
            </p>
          {% endif %}
        {% endfor %}
      </div>
    </div>

  </body>
</html>
